:root{--text:#e9eefc;--danger:#ff5a6a;--success:#4ade80;--tile:56px;--gap:8px}
*{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
html,body{height:100%;overflow:hidden;overscroll-behavior:none}
body{margin:0;display:flex;justify-content:center;color:var(--text);background:radial-gradient(1200px 600px at 30% 10%,#1d2b5a 0%,#0e1320 55%,#070a12 100%)}
.container{width:min(980px,100%);height:100vh;display:flex;flex-direction:column;padding:16px 14px 14px;gap:12px}
.header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;flex:0 0 auto}
.title{font-size:18px;margin:0;font-weight:700;letter-spacing:.2px;flex:1 1 auto}
.buttons{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
button{appearance:none;background:linear-gradient(180deg,#2a3760,#1b2441);border:1px solid rgba(255,255,255,.12);color:var(--text);padding:10px 12px;border-radius:14px;cursor:pointer;box-shadow:0 10px 25px rgba(0,0,0,.25);transition:transform .08s ease;touch-action:manipulation}
button:active{transform:translateY(1px) scale(.99)}
button.secondary{background:linear-gradient(180deg,#25304f,#1a223a)}
button.danger{background:linear-gradient(180deg,#5a1f2a,#3a151e);border-color:rgba(255,90,106,.35)}
.bar{display:flex;gap:12px;flex-wrap:wrap;align-items:center;flex:0 0 auto}
.info{background:rgba(20,27,46,.7);border:1px solid rgba(255,255,255,.09);padding:10px 12px;border-radius:16px;display:flex;gap:12px;align-items:center;backdrop-filter:blur(10px)}
.info span{opacity:.9}
.info b{font-weight:800}

.game{display:flex;flex-direction:column;gap:12px;flex:1 1 auto;min-height:0}
.board{position:relative;flex:1 1 auto;min-height:0;background:rgba(20,27,46,.6);border:1px solid rgba(255,255,255,.09);border-radius:22px;overflow:hidden;box-shadow:0 18px 50px rgba(0,0,0,.35);backdrop-filter:blur(10px)}
.boardHint{position:absolute;left:14px;top:12px;opacity:.7;font-size:12px}

.tile{position:absolute;width:var(--tile);height:var(--tile);border-radius:var(--r,14px);display:grid;place-items:center;user-select:none;cursor:pointer;background:linear-gradient(180deg,#ffffff,#f1f3f7);border:1px solid rgba(255,255,255,.55);color:#1b1f2a;box-shadow:0 14px 26px rgba(0,0,0,.35),inset 0 2px 0 rgba(255,255,255,.88),inset 0 -3px 6px rgba(0,0,0,.12);isolation:isolate}
.tile.blocked{opacity:.55;filter:saturate(.85) brightness(.95) grayscale(.15);cursor:not-allowed}
.tile::before{content:"";position:absolute;inset:1px;border-radius:calc(var(--r,14px) - 1px);border:1px solid rgba(0,0,0,.08);pointer-events:none;z-index:0}
.tile::after{content:"";position:absolute;inset:0;border-radius:var(--r,14px);background:radial-gradient(120px 60px at 25% 15%,rgba(255,255,255,.55),transparent 60%);opacity:.12;pointer-events:none;z-index:0}

.tilePip{position:absolute;left:var(--pipOffset,8px);top:var(--pipOffset,8px);width:var(--pipSize,10px);height:var(--pipSize,10px);border-radius:999px;background:hsl(var(--hue,200) 70% 55%);box-shadow:0 1px 0 rgba(255,255,255,.85),0 3px 8px rgba(0,0,0,.18);z-index:2}
.tileIcon{position:relative;z-index:2;width:84%;height:84%;display:grid;place-items:center;overflow:hidden;border-radius:12px}
.tileIcon img{width:100%;height:100%;object-fit:contain;display:block;transform:translateY(-2%)}

.trayPanel{flex:0 0 auto;background:rgba(20,27,46,.75);border:1px solid rgba(255,255,255,.09);border-radius:22px;padding:12px 12px 14px;box-shadow:0 18px 50px rgba(0,0,0,.35);backdrop-filter:blur(10px)}
.trayHeader{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;gap:10px}
.trayHeader small{opacity:.7}
.traySlots{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}
.traySlot{height:62px;border-radius:18px;border:1px dashed rgba(255,255,255,.18);display:grid;place-items:center;font-size:28px;background:rgba(0,0,0,.12);position:relative;overflow:hidden}
.traySlotIcon{width:78%;height:78%;display:block;object-fit:contain}
.status{margin-top:10px;min-height:22px;opacity:.9}
.status .win{color:var(--success);font-weight:800}
.status .lose{color:var(--danger);font-weight:800}
.hint{opacity:.65;font-size:12px;margin-top:8px}
.credits{opacity:.55;font-size:12px;padding:0 2px;flex:0 0 auto}

/* Modal popup menu */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:99999;padding:16px}
.modal.open{display:flex}
.modalOverlay{position:absolute;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(6px)}
.modalCard{position:relative;width:min(420px,100%);background:#141b2e;border:1px solid rgba(255,255,255,.12);border-radius:20px;box-shadow:0 22px 70px rgba(0,0,0,.55);padding:12px}
.modalTitleRow{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.modalTitle{font-weight:800;letter-spacing:.2px}
.modalClose{border-radius:14px;padding:8px 10px}
.modalActions{display:flex;flex-direction:column;gap:10px}
.modalActions button{width:100%;text-align:left}

/* Mobile tweaks */
@media (max-width:720px){
:root{--tile:50px}
.traySlots{gap:8px}
.traySlot{height:58px}
}
@media (max-width:520px){
.container{padding:10px 10px 10px;gap:10px}
.title{font-size:15px}
.buttons{flex-wrap:nowrap;gap:8px}
.buttons button{flex:1 1 0;padding:9px 10px}
.info{gap:8px;flex-wrap:wrap;background:#141b2e;padding:8px 10px}
.board{background:#141b2e}
.trayPanel{background:#141b2e;padding:10px 10px 10px}
.trayHeader small{display:none}
.hint{display:none}
.status{margin-top:6px}
.traySlots{gap:8px}
.traySlot{height:46px;font-size:22px;border-radius:16px}
.boardHint{display:none}
.credits{display:none}
body{background:#0e1320}
}
@media (max-width:380px){
:root{--gap:6px}
.traySlots{gap:6px}
.traySlot{height:44px;font-size:20px}
}
